(this["webpackJsonpconversation-client"]=this["webpackJsonpconversation-client"]||[]).push([[0],{69:function(e,t,n){},70:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),i=n(32),s=n.n(i),a=n(2),u=n(33),o="production",l={production:"https://tiny-conversation.herokuapp.com",development:"http://localhost:8080"},j=function(){return l[o]?l[o]:l.development},b=(n(69),n(70),n(0)),f=function(e){var t=e.children;return Object(b.jsxs)("header",{className:"header",children:[Object(b.jsx)("p",{children:"App title"}),t]})},d=function(e){var t=e.userName,n=e.setUserName,r=Object(c.useState)(!1),i=Object(a.a)(r,2),s=i[0],u=i[1],o=Object(c.useState)(""),l=Object(a.a)(o,2),j=l[0],f=l[1];Object(c.useEffect)((function(){var e=document.querySelector(".header__username-input");e&&e.focus()}));return Object(b.jsx)("div",{className:"header__user",children:s?Object(b.jsx)("form",{onSubmit:function(e){e.preventDefault(),n(j),f(""),u(!1)},children:Object(b.jsx)("input",{type:"text",value:j,onChange:function(e){return f(e.target.value)},onBlur:function(){return u(!1)},className:"header__username-input"})}):Object(b.jsx)("button",{onClick:function(){f(t),u(!0)},children:t})})},h=(n(72),function(e){var t=e.channelList,n=e.emitActiveConversation,c=e.activeConversation,r=e.children;return Object(b.jsxs)("nav",{className:"conversations",children:[t.map((function(e){return Object(b.jsx)("button",{className:(t=e.id,"conversations__channelBtn conversations__channelBtn--".concat(t===c?"active":"inactive")),onClick:function(){return n(e.id)},children:e.label},e.id);var t})),r]})}),O=function(e){var t=e.createChannel,n=Object(c.useState)(!1),r=Object(a.a)(n,2),i=r[0],s=r[1],u=Object(c.useState)(""),o=Object(a.a)(u,2),l=o[0],j=o[1];Object(c.useEffect)((function(){var e=document.querySelector(".conversations__new-channel-input");e&&e.focus()}));return Object(b.jsx)("div",{className:"conversations__add-channel-btn",children:i?Object(b.jsx)("form",{onSubmit:function(e){e.preventDefault(),t(l),j(""),s(!1)},children:Object(b.jsx)("input",{type:"text",onBlur:function(){return s(!1)},className:"conversations__new-channel-input",value:l,onChange:function(e){return j(e.target.value)}})}):Object(b.jsx)("button",{onClick:function(){return s(!0)},children:"Add Channel"})})},v=(n(73),function(e){var t=e.send,n=e.children,r=e.messages,i=e.alertTyping,s=e.usersTyping,u=Object(c.useState)(""),o=Object(a.a)(u,2),l=o[0],j=o[1];Object(c.useEffect)((function(){var e=document.querySelector(".chat__messages");e.scrollTop=e.scrollHeight}),[r]);return Object(b.jsxs)("main",{className:"chat",children:[Object(b.jsx)("div",{className:"chat__messages",children:n}),Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:s}),Object(b.jsxs)("form",{className:"chat__form",onSubmit:function(e){e.preventDefault(),t(l),j("")},children:[Object(b.jsx)("input",{type:"text",className:"chat__input",value:l,onChange:function(e){i(),j(e.target.value)}}),Object(b.jsx)("button",{className:"chat__button",children:"Send"})]})]})]})}),m=function(e){var t=e.user,n=e.messageObj;return Object(b.jsxs)("div",{className:"chat__content",children:[Object(b.jsxs)("div",{className:"chat__content-header",children:[Object(b.jsx)("p",{children:t}),Object(b.jsx)("p",{children:function(e){var t=new Date(e);return t.getHours()+":"+(t.getMinutes()<10?"0".concat(t.getMinutes()):t.getMinutes())}(n.time)})]}),Object(b.jsx)("p",{className:"chat__content-text",children:n.text})]})},p=(n(74),function(e){var t=e.userlist,n=void 0===t?[]:t;return Object(b.jsx)("aside",{className:"users",children:n.map((function(e){return Object(b.jsx)("p",{children:e.name},e.pubId)}))})}),x=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)([]),s=Object(a.a)(i,2),o=s[0],l=s[1],x=Object(c.useState)(0),g=Object(a.a)(x,2),_=g[0],N=g[1],S=Object(c.useState)([]),y=Object(a.a)(S,2),C=y[0],T=y[1],k=Object(c.useState)(),B=Object(a.a)(k,2),E=B[0],w=B[1],D=Object(c.useState)([]),M=Object(a.a)(D,2),A=M[0],F=M[1],I=Object(c.useRef)();Object(c.useEffect)((function(){I.current=Object(u.io)(j());var e=I.current;return e.on("user-list",(function(e){return r(e)})),e.on("channel-list",(function(e){return l(e)})),e.on("channel-message",(function(e){return T(e)})),e.on("user-id",(function(e){return w(e)})),e.on("users-typing",(function(e){return F(e)})),function(){e.close()}}),[]);var L=function(e){var t=n.find((function(t){return t.pubId===e}));return t?t.name:"Missing"};return Object(b.jsxs)("div",{className:"app",children:[Object(b.jsx)(f,{children:Object(b.jsx)(d,{userName:L(E),setUserName:function(e){I.current.emit("update-name",e)}})}),Object(b.jsx)(h,{channelList:o,emitActiveConversation:function(e){N(e),I.current.emit("set-active",e)},activeConversation:_,children:Object(b.jsx)(O,{createChannel:function(e){I.current.emit("create-channel",e)}})}),Object(b.jsx)(v,{send:function(e){void 0!==E&&I.current.emit("message",{text:e,id:_,by:E})},messages:C,alertTyping:function(){I.current.emit("is-typing")},usersTyping:function(){var e=A.filter((function(e){return e!==E}));if(1===e.length)return"".concat(L(e[0])," is typing");if(e.length<3){var t="";return e.forEach((function(n,c){c!==e.length-1?t+="".concat(L(n),", "):t+="and ".concat(L(n)," are typing")})),t}return"Several people are typing"}(),children:C.map((function(e){return Object(b.jsx)(m,{user:L(e.by),messageObj:e},e.id)}))}),Object(b.jsx)(p,{userlist:n.filter((function(e){return e.online}))})]})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),i(e),s(e)}))};n(75),n(76);s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(x,{})}),document.getElementById("root")),g()}},[[77,1,2]]]);
//# sourceMappingURL=main.5ff64066.chunk.js.map