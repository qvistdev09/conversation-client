(this["webpackJsonpconversation-client"]=this["webpackJsonpconversation-client"]||[]).push([[0],Array(25).concat([function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon1.be78a816.svg"},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},,function(t,e,n){var c={"./icon1.svg":25,"./icon10.svg":96,"./icon11.svg":97,"./icon12.svg":98,"./icon13.svg":99,"./icon14.svg":100,"./icon15.svg":101,"./icon16.svg":102,"./icon17.svg":103,"./icon18.svg":104,"./icon19.svg":105,"./icon2.svg":106,"./icon20.svg":107,"./icon21.svg":108,"./icon22.svg":109,"./icon23.svg":110,"./icon24.svg":111,"./icon25.svg":112,"./icon26.svg":113,"./icon27.svg":114,"./icon28.svg":115,"./icon29.svg":116,"./icon3.svg":117,"./icon30.svg":118,"./icon31.svg":119,"./icon32.svg":120,"./icon33.svg":121,"./icon34.svg":122,"./icon35.svg":123,"./icon36.svg":124,"./icon37.svg":125,"./icon38.svg":126,"./icon39.svg":127,"./icon4.svg":128,"./icon40.svg":129,"./icon41.svg":130,"./icon42.svg":131,"./icon43.svg":132,"./icon44.svg":133,"./icon45.svg":134,"./icon46.svg":135,"./icon47.svg":136,"./icon48.svg":137,"./icon49.svg":138,"./icon5.svg":139,"./icon50.svg":140,"./icon6.svg":141,"./icon7.svg":142,"./icon8.svg":143,"./icon9.svg":144};function i(t){var e=s(t);return n(e)}function s(t){if(!n.o(c,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return c[t]}i.keys=function(){return Object.keys(c)},i.resolve=s,t.exports=i,i.id=95},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon10.7b6cb582.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon11.c4e447fa.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon12.34ac38ad.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon13.b807f680.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon14.9b9fdef1.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon15.8a899c72.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon16.cfd56a7b.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon17.96da9cd4.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon18.00308d4c.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon19.e39fc14b.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon2.23fce968.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon20.5edc3050.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon21.2e62f7bd.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon22.c2953a5e.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon23.bf39ce58.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon24.47e5020a.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon25.38aeadd6.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon26.1ee31e9c.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon27.d7c6887f.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon28.b5b90c1d.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon29.f930cc1f.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon3.7dcb6761.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon30.a06620a2.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon31.1ba79db4.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon32.7d284c1b.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon33.9742d126.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon34.7d8098fb.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon35.1c8cde62.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon36.bf625fe0.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon37.d9166e4d.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon38.cd397d5e.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon39.b572e9c6.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon4.905fe3e8.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon40.d78bfd96.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon41.784bf6f8.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon42.420ccc43.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon43.87b3c1df.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon44.0efbf879.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon45.e88afedb.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon46.36b47cd7.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon47.62a72054.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon48.57a483fd.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon49.6d1bc615.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon5.2fa1db86.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon50.c017f087.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon6.86e58767.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon7.ffece1cc.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon8.840f8a8e.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon9.f46af93f.svg"},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(50),n(51);var c=n(1),i=n.n(c),s=n(18),a=n.n(s),r=n(2),o=n(8),u=Object(o.b)({name:"users",initialState:{clientId:null,clientBlocked:!1,list:[]},reducers:{setList:function(t,e){t.list=e.payload},setClientId:function(t,e){t.clientId=e.payload},setSpamBlock:function(t,e){t.clientBlocked=e.payload}}}),d=function(t){var e=t.users,n=e.clientId,c=e.list.find((function(t){return t.id===n}));return c?c.name:". . ."},l=function(t){var e=t.users,n=e.clientId,c=e.list.find((function(t){return t.id===n}));return c&&c.icon?c.icon:"0"},f=function(t){var e=t.users,n=e.clientId,c=e.list.find((function(t){return t.id===n}));return c?c.color:"#89f0a4"},v=u.actions,g=v.setList,m=v.setClientId,p=v.setSpamBlock,j=u.reducer,b=n(49),h=Object(o.b)({name:"channels",initialState:{active:0,list:[],usersTyping:[]},reducers:{setChannelsList:function(t,e){t.list=e.payload},setActiveChannel:function(t,e){t.active=e.payload},setUsersTyping:function(t,e){t.usersTyping=e.payload},addTypingUser:function(t,e){var n=e.payload;t.usersTyping=[].concat(Object(b.a)(t.usersTyping),[n])},removeUserTyping:function(t,e){var n=e.payload;t.usersTyping=t.usersTyping.filter((function(t){return t!==n}))}}}),O=h.actions,_=O.setChannelsList,x=O.setActiveChannel,y=O.setUsersTyping,N=O.addTypingUser,w=O.removeUserTyping,S=h.reducer,C=n(28),k=n.n(C),T=n(46),I=n(47),E={},B=function(t,e){return E[t]&&E[t][e]?E[t][e]:null},U=function(t,e){var n=[];return t.forEach((function(t){B(e,t)||n.push(t)})),n},F=function(t,e){e.forEach((function(e){return function(t,e){E[t]?E[t][e.messageId]=e:E[t]=Object(I.a)({},e.messageId,e)}(t,e)}))},L=Object(o.b)({name:"messages",initialState:{constructed:[],new:[]},reducers:{setConstructedMessages:function(t,e){t.constructed=e.payload},addOneNewInChannel:function(t,e){var n=e.payload,c=t.new.find((function(t){return t.id===n}));c?c.new+=1:t.new.push({id:n,new:1})},clearAllNew:function(t,e){var n=e.payload,c=t.new.find((function(t){return t.id===n}));c&&(c.new=0)}}}),q=L.actions,A=q.setConstructedMessages,D=q.addOneNewInChannel,M=q.clearAllNew,H=L.reducer,P=Object(o.b)({name:"appStatus",initialState:{connected:!1,statusText:"Connecting to server, please wait..."},reducers:{setConnectedStatus:function(t,e){t.connected=e.payload},setStatusText:function(t,e){t.statusText=e.payload}}}),z=P.actions,J=z.setConnectedStatus,R=z.setStatusText,W=P.reducer,G=function(t,e,n){return function(){var c=Object(T.a)(k.a.mark((function c(i,s){var a,r,o,u;return k.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(s().channels.active!==e&&(i(J(!1)),i(R("Retrieving messages..."))),a=t.split("-").filter((function(t){return""!==t})).map((function(t){return parseInt(t,10)})),!((r=U(a,e)).length>0)){c.next=10;break}return c.next=7,n(e,r);case 7:o=c.sent,console.log("Had to retreive messages from the server",o.length),F(e,o);case 10:u=[],a.forEach((function(t){return u.push(B(e,t))})),i(A(u)),i(J(!0));case 14:case"end":return c.stop()}}),c)})));return function(t,e){return c.apply(this,arguments)}}()},K=n(48),Q="production",V={production:"https://tiny-conversation.herokuapp.com",development:"http://localhost:8080"},X=function(){return V[Q]?V[Q]:V.development},Y=(n(92),n(93),n(0)),Z=function(t){var e=t.children;return Object(Y.jsxs)("header",{className:"header",children:[Object(Y.jsxs)("div",{className:"header__left",children:[Object(Y.jsx)("i",{className:"far fa-comment-dots header__icon"}),Object(Y.jsx)("h1",{className:"header__title",children:"conversations"})]}),e]})},$=n(10),tt=n(25),et=n(95),nt={};et.keys().forEach((function(t){var e;nt[(e=t,e.replace("./","").replace(".svg","").replace("icon",""))]=et(t)}));n(145);var ct=function(t){var e,n=t.icon,c=void 0===n?3:n,i=t.background,s=void 0===i?"#89f0a4":i,a=t.status,r=void 0!==a&&a,o=t.size,u=void 0===o?"3rem":o,d=t.margin,l=void 0===d?"0.5rem":d;return Object(Y.jsxs)("div",{className:"usericon",style:{width:u,minWidth:u,height:u,minHeight:u,backgroundColor:s,margin:l},children:[Object(Y.jsx)("img",{src:(e=c,nt[e]?nt[e].default:tt.default),alt:"temp",className:"usericon__svg"}),r&&Object(Y.jsx)("div",{className:"usericon__status"})]})},it=function(t){var e=t.setUserName,n=Object(r.c)((function(t){return t.appStatus.connected})),i=Object(c.useState)(!1),s=Object($.a)(i,2),a=s[0],o=s[1],u=Object(c.useState)(""),v=Object($.a)(u,2),g=v[0],m=v[1],p=Object(r.c)(d),j=Object(r.c)(f),b=Object(r.c)(l);Object(c.useEffect)((function(){var t=document.querySelector(".header__username-input");t&&t.focus()}));return Object(Y.jsxs)("div",{className:"header__user",children:[a?Object(Y.jsx)("form",{onSubmit:function(t){t.preventDefault(),e(g),m(""),o(!1)},children:Object(Y.jsx)("input",{type:"text",value:g,onChange:function(t){return m(t.target.value)},onBlur:function(){return o(!1)},className:"header__username-input",autoComplete:"off",required:!0})}):Object(Y.jsx)("button",{className:"header__name-btn",onClick:function(){m(p),o(!0)},disabled:!n,children:p}),Object(Y.jsx)(ct,{icon:b,background:j,status:!0})]})},st=(n(146),function(t){var e=t.emitActiveConversation,n=t.children,c=Object(r.c)((function(t){return t.appStatus.connected})),i=Object(r.c)((function(t){return t.messages.new})),s=Object(r.c)((function(t){return t.channels.list})),a=Object(r.c)((function(t){return t.channels.active})),o=function(t){var e=i.find((function(e){return e.id===t}));return e&&e.new>0?e.new:""},u=function(t){return t!==a};return Object(Y.jsxs)("nav",{className:"conversations",children:[s.map((function(t){return Object(Y.jsxs)("button",{className:(n=t.id,"conversations__channelBtn conversations__channelBtn--".concat(n===a?"active":"inactive")),onClick:function(){return e(t.id)},disabled:!c,children:[Object(Y.jsx)("span",{children:"#"}),t.label,u(t.id)&&""!==o(t.id)&&Object(Y.jsx)("span",{className:"conversations__new",children:o(t.id)})]},t.id);var n})),n]})}),at=function(t){var e=t.createChannel,n=Object(r.c)((function(t){return t.appStatus.connected})),i=Object(c.useState)(!1),s=Object($.a)(i,2),a=s[0],o=s[1],u=Object(c.useState)(""),d=Object($.a)(u,2),l=d[0],f=d[1];Object(c.useEffect)((function(){var t=document.querySelector(".conversations__add-channel-input");t&&t.focus()}));return Object(Y.jsx)("div",{className:"conversations__add-channel",children:a?Object(Y.jsx)("form",{onSubmit:function(t){t.preventDefault(),e(l),f(""),o(!1)},className:"conversations__add-channel-form",children:Object(Y.jsx)("input",{type:"text",onBlur:function(){o(!1),f("")},className:"conversations__add-channel-input",value:l,onChange:function(t){return f(t.target.value)},required:!0})}):Object(Y.jsx)("button",{className:"conversations__add-channel-btn",onClick:function(){return o(!0)},disabled:!n,children:"+ Add Channel"})})},rt=function(t,e){var n=e.find((function(e){return e.id===t}));return n?n.name:". . ."},ot=function(t,e){var n=e.find((function(e){return e.id===t}));return n?n.color:"#89f0a4"},ut=function(t,e){var n=e.find((function(e){return e.id===t}));return n&&n.icon?n.icon:"0"},dt=function(t){var e=t.user,n=t.messageObj,c=t.children;return Object(Y.jsxs)("div",{className:"chat__content",children:[Object(Y.jsx)("div",{className:"chat__left",children:c}),Object(Y.jsxs)("div",{className:"chat__right",children:[Object(Y.jsx)("div",{className:"chat__pointer"}),Object(Y.jsxs)("div",{className:"chat__content-header",children:[Object(Y.jsx)("p",{className:"chat__nametag",children:e}),Object(Y.jsx)("p",{className:"chat__timetag",children:function(t){var e=new Date(t);return(e.getHours()<10?"0".concat(e.getHours()):e.getHours())+":"+(e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes())}(n.date)})]}),Object(Y.jsx)("p",{className:"chat__texttag",children:n.textContent})]})]})},lt=(n(147),function(t){var e=t.send,n=t.alertTyping,i=Object(r.c)((function(t){return t.appStatus})),s=Object(r.c)((function(t){return t.messages.constructed})),a=Object(r.c)((function(t){var e=t.channels,n=e.list.find((function(t){return t.id===e.active}));return n?n.label:""})),o=Object(r.c)((function(t){return t.users.clientBlocked})),u=Object(c.useState)(""),d=Object($.a)(u,2),l=d[0],f=d[1],v=Object(r.c)((function(t){return t.users.list})),g=Object(r.c)((function(t){var e=t.users.clientId,n=t.channels.usersTyping,c=t.users.list,i=n.filter((function(t){return t!==e}));if(1===i.length)return"".concat(rt(i[0],c)," is typing");if(i.length<3){var s="";return i.forEach((function(t,e){e!==i.length-1?s+="".concat(rt(t,c),", "):s+="and ".concat(rt(t,c)," are typing")})),s}return"Several people are typing"}));Object(c.useEffect)((function(){var t=document.querySelector(".chat__messages");t.scrollTop=t.scrollHeight}));return Object(Y.jsxs)("main",{className:"chat",children:[Object(Y.jsxs)("h2",{className:"chat__channeltag",children:[Object(Y.jsx)("span",{style:{opacity:""!==a?"1":"0"},children:"#"}),a]}),Object(Y.jsx)("div",{className:"chat__messages",children:i.connected?s.map((function(t){return Object(Y.jsx)(dt,{user:rt(t.userId,v),messageObj:t,children:Object(Y.jsx)(ct,{icon:ut(t.userId,v),size:"2.3rem",margin:"0",background:ot(t.userId,v)})},t.messageId)})):Object(Y.jsxs)("div",{className:"chat__loadingdiv",children:[Object(Y.jsx)("i",{className:"fas fa-sync-alt chat__loadingicon"}),Object(Y.jsx)("p",{className:"chat__loadingtext",children:i.statusText})]})}),Object(Y.jsxs)("div",{className:"chat__form-container",children:[""!==g&&Object(Y.jsxs)("p",{className:"chat__typingalert",children:[g,Object(Y.jsx)("span",{className:"chat__dot1",children:"."}),Object(Y.jsx)("span",{className:"chat__dot2",children:"."}),Object(Y.jsx)("span",{className:"chat__dot3",children:"."})]}),Object(Y.jsxs)("form",{className:"chat__form",onSubmit:function(t){t.preventDefault(),e(l),f("")},children:[Object(Y.jsx)("input",{type:"text",className:"chat__input",value:l,onChange:function(t){n(),f(t.target.value)},required:!0,disabled:o||!i.connected,placeholder:o?"Please hold back a bit on your messages!":"Type here!",style:{opacity:i.connected?1:.35}}),Object(Y.jsx)("button",{className:"chat__button",disabled:!i.connected,children:"Send"})]})]})]})}),ft=(n(148),function(){var t=Object(r.c)((function(t){return t.appStatus.connected})),e=Object(r.c)((function(t){return t.users.list.filter((function(t){return t.online}))}));return Object(Y.jsx)("aside",{className:"users",children:e.map((function(e){return Object(Y.jsxs)("div",{className:"users__row",style:{opacity:t?1:.35},children:[Object(Y.jsx)(ct,{icon:e.icon,background:e.color,status:!0,size:"2rem"}),Object(Y.jsx)("p",{className:"users__nametag",children:e.name})]},e.id)}))})}),vt=(n(149),function(){return Object(Y.jsxs)("footer",{className:"footer",children:[Object(Y.jsx)("p",{className:"footer__text",children:"by Oscar Lindqvist"}),Object(Y.jsx)("i",{className:"fas fa-circle footer__icon"}),Object(Y.jsxs)("p",{className:"footer__text",children:["Icons made by"," ",Object(Y.jsx)("a",{className:"footer__link",href:"https://www.freepik.com",title:"Freepik",children:"Freepik"})," ","from"," ",Object(Y.jsx)("a",{className:"footer__link",href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})]})}),gt=function(){var t=Object(r.b)(),e=Object(r.c)((function(t){return t.channels.active})),n=Object(c.useRef)(),i=function(t,e){return new Promise((function(c){n.current.emit("need-messages",t,e,(function(t){c(t)}))}))};Object(c.useEffect)((function(){n.current=Object(K.io)(X());var e=n.current;return e.on("is-connected",(function(){return t(J(!0))})),e.on("clear-cache",(function(){E={}})),e.on("user-list",(function(e){return t(g(e))})),e.on("channel-list",(function(e){return t(_(e))})),e.on("user-id",(function(e){return t(m(e))})),e.on("replace-people-typing-aray",(function(e){return t(y(e))})),e.on("user-started-typing",(function(e){return t(N(e))})),e.on("user-stopped-typing",(function(e){return t(w(e))})),e.on("new-channel-message",(function(e){return t(D(e))})),e.on("spam-block",(function(e){return t(p(e))})),e.on("new-sequence",(function(e,n){return t(G(e,n,i))})),e.on("disconnect",(function(){t(J(!1)),t(R("Lost connection with server, reconnecting..."))})),function(){e.close()}}),[t]);return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("div",{className:"filler-div"}),Object(Y.jsxs)("div",{className:"app",children:[Object(Y.jsx)(Z,{children:Object(Y.jsx)(it,{setUserName:function(t){n.current.emit("update-name",t)}})}),Object(Y.jsx)(st,{emitActiveConversation:function(c){t(M(e)),t(x(c)),t(M(c)),n.current.emit("set-channel",c)},children:Object(Y.jsx)(at,{createChannel:function(t){n.current.emit("create-channel",t)}})}),Object(Y.jsx)(lt,{send:function(t){n.current.emit("channel-message",t)},alertTyping:function(){n.current.emit("is-typing")}}),Object(Y.jsx)(ft,{})]}),Object(Y.jsx)(vt,{})]})},mt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,151)).then((function(e){var n=e.getCLS,c=e.getFID,i=e.getFCP,s=e.getLCP,a=e.getTTFB;n(t),c(t),i(t),s(t),a(t)}))},pt=n(3),jt=Object(pt.c)({users:j,channels:S,messages:H,appStatus:W}),bt=n(14),ht=Object(o.a)({reducer:jt,middleware:[bt.a]});a.a.render(Object(Y.jsx)(i.a.StrictMode,{children:Object(Y.jsx)(r.a,{store:ht,children:Object(Y.jsx)(gt,{})})}),document.getElementById("root")),mt()}]),[[150,1,2]]]);
//# sourceMappingURL=main.df59aacb.chunk.js.map