(this["webpackJsonpconversation-client"]=this["webpackJsonpconversation-client"]||[]).push([[0],Array(21).concat([function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon1.be78a816.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},,function(t,e,n){var c={"./icon1.svg":21,"./icon10.svg":82,"./icon11.svg":83,"./icon12.svg":84,"./icon13.svg":85,"./icon14.svg":86,"./icon15.svg":87,"./icon16.svg":88,"./icon17.svg":89,"./icon18.svg":90,"./icon19.svg":91,"./icon2.svg":92,"./icon20.svg":93,"./icon21.svg":94,"./icon22.svg":95,"./icon23.svg":96,"./icon24.svg":97,"./icon25.svg":98,"./icon26.svg":99,"./icon27.svg":100,"./icon28.svg":101,"./icon29.svg":102,"./icon3.svg":103,"./icon30.svg":104,"./icon31.svg":105,"./icon32.svg":106,"./icon33.svg":107,"./icon34.svg":108,"./icon35.svg":109,"./icon36.svg":110,"./icon37.svg":111,"./icon38.svg":112,"./icon39.svg":113,"./icon4.svg":114,"./icon40.svg":115,"./icon41.svg":116,"./icon42.svg":117,"./icon43.svg":118,"./icon44.svg":119,"./icon45.svg":120,"./icon46.svg":121,"./icon47.svg":122,"./icon48.svg":123,"./icon49.svg":124,"./icon5.svg":125,"./icon50.svg":126,"./icon6.svg":127,"./icon7.svg":128,"./icon8.svg":129,"./icon9.svg":130};function i(t){var e=s(t);return n(e)}function s(t){if(!n.o(c,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return c[t]}i.keys=function(){return Object.keys(c)},i.resolve=s,t.exports=i,i.id=81},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon10.7b6cb582.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon11.c4e447fa.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon12.34ac38ad.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon13.b807f680.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon14.9b9fdef1.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon15.8a899c72.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon16.cfd56a7b.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon17.96da9cd4.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon18.00308d4c.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon19.e39fc14b.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon2.23fce968.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon20.5edc3050.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon21.2e62f7bd.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon22.c2953a5e.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon23.bf39ce58.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon24.47e5020a.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon25.38aeadd6.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon26.1ee31e9c.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon27.d7c6887f.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon28.b5b90c1d.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon29.f930cc1f.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon3.7dcb6761.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon30.a06620a2.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon31.1ba79db4.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon32.7d284c1b.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon33.9742d126.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon34.7d8098fb.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon35.1c8cde62.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon36.bf625fe0.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon37.d9166e4d.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon38.cd397d5e.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon39.b572e9c6.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon4.905fe3e8.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon40.d78bfd96.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon41.784bf6f8.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon42.420ccc43.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon43.87b3c1df.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon44.0efbf879.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon45.e88afedb.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon46.36b47cd7.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon47.62a72054.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon48.57a483fd.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon49.6d1bc615.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon5.2fa1db86.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon50.c017f087.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon6.86e58767.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon7.ffece1cc.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon8.840f8a8e.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/icon9.f46af93f.svg"},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var c=n(1),i=n.n(c),s=n(39),a=n.n(s),r=n(22),o=n.n(r),u=n(40),d=n(23),f=n(12),l=n(2),v=n(41),m="production",j={production:"https://tiny-conversation.herokuapp.com",development:"http://localhost:8080"},g=function(){return j[m]?j[m]:j.development},b=(n(78),n(79),n(0)),h=function(t){var e=t.children;return Object(b.jsxs)("header",{className:"header",children:[Object(b.jsxs)("div",{className:"header__left",children:[Object(b.jsx)("i",{className:"far fa-comment-dots header__icon"}),Object(b.jsx)("h1",{className:"header__title",children:"conversations"})]}),e]})},p=function(t){var e=t.userName,n=t.setUserName,i=t.children,s=Object(c.useState)(!1),a=Object(l.a)(s,2),r=a[0],o=a[1],u=Object(c.useState)(""),d=Object(l.a)(u,2),f=d[0],v=d[1];Object(c.useEffect)((function(){var t=document.querySelector(".header__username-input");t&&t.focus()}));return Object(b.jsxs)("div",{className:"header__user",children:[r?Object(b.jsx)("form",{onSubmit:function(t){t.preventDefault(),n(f),v(""),o(!1)},children:Object(b.jsx)("input",{type:"text",value:f,onChange:function(t){return v(t.target.value)},onBlur:function(){return o(!1)},className:"header__username-input",autoComplete:"off",required:!0})}):Object(b.jsx)("button",{className:"header__name-btn",onClick:function(){v(e),o(!0)},children:e}),i]})},O=n(21),_=n(81),x={};_.keys().forEach((function(t){var e;x[(e=t,e.replace("./","").replace(".svg","").replace("icon",""))]=_(t)}));n(131);var N=function(t){var e,n=t.icon,c=void 0===n?3:n,i=t.background,s=void 0===i?"#89f0a4":i,a=t.status,r=void 0!==a&&a,o=t.size,u=void 0===o?"3rem":o,d=t.margin,f=void 0===d?"0.5rem":d;return Object(b.jsxs)("div",{className:"usericon",style:{width:u,minWidth:u,height:u,minHeight:u,backgroundColor:s,margin:f},children:[Object(b.jsx)("img",{src:(e=c,x[e]?x[e].default:O.default),alt:"temp",className:"usericon__svg"}),r&&Object(b.jsx)("div",{className:"usericon__status"})]})},w=(n(132),function(t){var e=t.channelList,n=t.newMessages,c=t.emitActiveConversation,i=t.activeConversation,s=t.children,a=function(t){var e=n.find((function(e){return e.id===t}));return e&&e.new>0?e.new:""},r=function(t){return t!==i};return Object(b.jsxs)("nav",{className:"conversations",children:[e.map((function(t){return Object(b.jsxs)("button",{className:(e=t.id,"conversations__channelBtn conversations__channelBtn--".concat(e===i?"active":"inactive")),onClick:function(){return c(t.id)},children:[Object(b.jsx)("span",{children:"#"}),t.label,r(t.id)&&""!==a(t.id)&&Object(b.jsx)("span",{className:"conversations__new",children:a(t.id)})]},t.id);var e})),s]})}),y=function(t){var e=t.createChannel,n=Object(c.useState)(!1),i=Object(l.a)(n,2),s=i[0],a=i[1],r=Object(c.useState)(""),o=Object(l.a)(r,2),u=o[0],d=o[1];Object(c.useEffect)((function(){var t=document.querySelector(".conversations__add-channel-input");t&&t.focus()}));return Object(b.jsx)("div",{className:"conversations__add-channel",children:s?Object(b.jsx)("form",{onSubmit:function(t){t.preventDefault(),e(u),d(""),a(!1)},className:"conversations__add-channel-form",children:Object(b.jsx)("input",{type:"text",onBlur:function(){a(!1),d("")},className:"conversations__add-channel-input",value:u,onChange:function(t){return d(t.target.value)},required:!0})}):Object(b.jsx)("button",{className:"conversations__add-channel-btn",onClick:function(){return a(!0)},children:"+ Add Channel"})})},k=(n(133),function(t){var e=t.send,n=t.children,i=t.messages,s=t.alertTyping,a=t.usersTyping,r=t.currentChannel,o=t.spamBlock,u=t.loadingText,d=Object(c.useState)(""),f=Object(l.a)(d,2),v=f[0],m=f[1];Object(c.useEffect)((function(){var t=document.querySelector(".chat__messages");t.scrollTop=t.scrollHeight}),[i]);return Object(b.jsxs)("main",{className:"chat",children:[Object(b.jsxs)("h2",{className:"chat__channeltag",children:[Object(b.jsx)("span",{style:{opacity:""!==r?"1":"0"},children:"#"}),r]}),Object(b.jsx)("div",{className:"chat__messages",children:""!==u?Object(b.jsxs)("div",{className:"chat__loadingdiv",children:[Object(b.jsx)("i",{className:"fas fa-sync-alt chat__loadingicon"}),Object(b.jsx)("p",{className:"chat__loadingtext",children:u})]}):n}),Object(b.jsxs)("div",{className:"chat__form-container",children:[""!==a&&Object(b.jsxs)("p",{className:"chat__typingalert",children:[a,Object(b.jsx)("span",{className:"chat__dot1",children:"."}),Object(b.jsx)("span",{className:"chat__dot2",children:"."}),Object(b.jsx)("span",{className:"chat__dot3",children:"."})]}),Object(b.jsxs)("form",{className:"chat__form",onSubmit:function(t){t.preventDefault(),e(v),m("")},children:[Object(b.jsx)("input",{type:"text",className:"chat__input",value:v,onChange:function(t){s(),m(t.target.value)},required:!0,disabled:o,placeholder:o?"Please hold back a bit on your messages!":"Type here!"}),Object(b.jsx)("button",{className:"chat__button",children:"Send"})]})]})]})}),S=function(t){var e=t.user,n=t.messageObj,c=t.children;return Object(b.jsxs)("div",{className:"chat__content",children:[Object(b.jsx)("div",{className:"chat__left",children:c}),Object(b.jsxs)("div",{className:"chat__right",children:[Object(b.jsx)("div",{className:"chat__pointer"}),Object(b.jsxs)("div",{className:"chat__content-header",children:[Object(b.jsx)("p",{className:"chat__nametag",children:e}),Object(b.jsx)("p",{className:"chat__timetag",children:function(t){var e=new Date(t);return(e.getHours()<10?"0".concat(e.getHours()):e.getHours())+":"+(e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes())}(n.date)})]}),Object(b.jsx)("p",{className:"chat__texttag",children:n.textContent})]})]})},C=(n(134),function(t){var e=t.userlist,n=void 0===e?[]:e;return Object(b.jsx)("aside",{className:"users",children:n.map((function(t){return Object(b.jsxs)("div",{className:"users__row",children:[Object(b.jsx)(N,{icon:t.icon,background:t.color,status:!0,size:"2rem"}),Object(b.jsx)("p",{className:"users__nametag",children:t.name})]},t.id)}))})}),E=(n(135),function(){return Object(b.jsxs)("footer",{className:"footer",children:[Object(b.jsx)("p",{className:"footer__text",children:"by Oscar Lindqvist"}),Object(b.jsx)("i",{className:"fas fa-circle footer__icon"}),Object(b.jsxs)("p",{className:"footer__text",children:["Icons made by"," ",Object(b.jsx)("a",{className:"footer__link",href:"https://www.freepik.com",title:"Freepik",children:"Freepik"})," ","from"," ",Object(b.jsx)("a",{className:"footer__link",href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})]})}),T=n(16),I={},F=function(t,e){return I[t]&&I[t][e]?I[t][e]:null},q=function(){var t=Object(c.useState)([]),e=Object(l.a)(t,2),n=e[0],i=e[1],s=Object(c.useState)([]),a=Object(l.a)(s,2),r=a[0],m=a[1],j=Object(c.useState)(0),O=Object(l.a)(j,2),_=O[0],x=O[1],q=Object(c.useState)([]),B=Object(l.a)(q,2),D=B[0],L=B[1],M=Object(c.useState)(),H=Object(l.a)(M,2),A=H[0],P=H[1],U=Object(c.useState)([]),z=Object(l.a)(U,2),J=z[0],W=z[1],R=Object(c.useState)([]),G=Object(l.a)(R,2),K=G[0],Q=G[1],V=Object(c.useState)(!1),X=Object(l.a)(V,2),Y=X[0],Z=X[1],$=Object(c.useState)("Waking up server, please wait..."),tt=Object(l.a)($,2),et=tt[0],nt=tt[1],ct=Object(c.useRef)(),it=function(t){Q((function(e){return e.find((function(e){return e.id===t}))?e.map((function(e){return e.id===t?Object(f.a)(Object(f.a)({},e),{},{new:e.new+1}):e})):[].concat(Object(d.a)(e),[{id:t,new:1}])}))},st=function(t,e){return new Promise((function(n){ct.current.emit("need-messages",t,e,(function(t){n(t)}))}))},at=function(t,e){e.forEach((function(e){return function(t,e){I[t]?I[t][e.messageId]=e:I[t]=Object(T.a)({},e.messageId,e)}(t,e)}))},rt=function(t,e){var n=[];return t.forEach((function(t){F(e,t)||n.push(t)})),n},ot=function(){var t=Object(u.a)(o.a.mark((function t(e,n,c,i,s,a){var r,u,d,f;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n!==a&&nt("Loading..."),r=e.split("-").filter((function(t){return""!==t})).map((function(t){return parseInt(t,10)})),!((u=c(r,n)).length>0)){t.next=9;break}return console.log("missing in cache",u),t.next=7,i(n,u);case 7:d=t.sent,s(n,d);case 9:f=[],r.forEach((function(t){return f.push(F(n,t))})),L(f),nt("");case 13:case"end":return t.stop()}}),t)})));return function(e,n,c,i,s,a){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){ct.current=Object(v.io)(g());var t=ct.current;return t.on("clear-cache",(function(){I={}})),t.on("user-list",(function(t){return i(t)})),t.on("channel-list",(function(t){return m(t)})),t.on("user-id",(function(t){return P(t)})),t.on("users-typing",(function(t){return W(t)})),t.on("new-channel-message",it),t.on("spam-block",(function(t){return Z(t)})),function(){t.close()}}),[]),Object(c.useEffect)((function(){ct.current.on("new-sequence",(function(t,e){return ot(t,e,rt,st,at,_)}))}),[_]);var ut=function(t){Q((function(e){return e.find((function(e){return e.id===t}))?e.map((function(e){return e.id===t?Object(f.a)(Object(f.a)({},e),{},{new:0}):e})):[].concat(Object(d.a)(e),[{id:t,new:0}])}))},dt=function(t){var e=n.find((function(e){return e.id===t}));return e?e.name:". . ."},ft=function(t){var e=n.find((function(e){return e.id===t}));return e?e.color:"#89f0a4"},lt=function(t){var e=n.find((function(e){return e.id===t}));return e&&e.icon?e.icon:"0"};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"filler-div"}),Object(b.jsxs)("div",{className:"app",children:[Object(b.jsx)(h,{children:Object(b.jsx)(p,{userName:dt(A),setUserName:function(t){ct.current.emit("update-name",t)},children:Object(b.jsx)(N,{icon:lt(A),background:ft(A),status:!0})})}),Object(b.jsx)(w,{channelList:r,newMessages:K,emitActiveConversation:function(t){ut(_),x(t),ut(t),ct.current.emit("set-channel",t)},activeConversation:_,children:Object(b.jsx)(y,{createChannel:function(t){ct.current.emit("create-channel",t)}})}),Object(b.jsx)(k,{send:function(t){ct.current.emit("channel-message",t)},messages:D,alertTyping:function(){ct.current.emit("is-typing")},usersTyping:function(){var t=J.filter((function(t){return t!==A}));if(1===t.length)return"".concat(dt(t[0])," is typing");if(t.length<3){var e="";return t.forEach((function(n,c){c!==t.length-1?e+="".concat(dt(n),", "):e+="and ".concat(dt(n)," are typing")})),e}return"Several people are typing"}(),currentChannel:function(){var t=r.find((function(t){return t.id===_}));return t?t.label:""}(),spamBlock:Y,loadingText:et,children:D.map((function(t){return Object(b.jsx)(S,{user:dt(t.userId),messageObj:t,children:Object(b.jsx)(N,{icon:lt(t.userId),size:"2.3rem",margin:"0",background:ft(t.userId)})},t.messageId)}))}),Object(b.jsx)(C,{userlist:n.filter((function(t){return t.online}))})]}),Object(b.jsx)(E,{})]})},B=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,139)).then((function(e){var n=e.getCLS,c=e.getFID,i=e.getFCP,s=e.getLCP,a=e.getTTFB;n(t),c(t),i(t),s(t),a(t)}))};n(136),n(137);a.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(q,{})}),document.getElementById("root")),B()}]),[[138,1,2]]]);
//# sourceMappingURL=main.df90a8cb.chunk.js.map