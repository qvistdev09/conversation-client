(this["webpackJsonpconversation-client"]=this["webpackJsonpconversation-client"]||[]).push([[0],Array(21).concat([function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon1.be78a816.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){var c={"./icon1.svg":21,"./icon10.svg":83,"./icon11.svg":84,"./icon12.svg":85,"./icon13.svg":86,"./icon14.svg":87,"./icon15.svg":88,"./icon16.svg":89,"./icon17.svg":90,"./icon18.svg":91,"./icon19.svg":92,"./icon2.svg":93,"./icon20.svg":94,"./icon21.svg":95,"./icon22.svg":96,"./icon23.svg":97,"./icon24.svg":98,"./icon25.svg":99,"./icon26.svg":100,"./icon27.svg":101,"./icon28.svg":102,"./icon29.svg":103,"./icon3.svg":104,"./icon30.svg":105,"./icon31.svg":106,"./icon32.svg":107,"./icon33.svg":108,"./icon34.svg":109,"./icon35.svg":110,"./icon36.svg":111,"./icon37.svg":112,"./icon38.svg":113,"./icon39.svg":114,"./icon4.svg":115,"./icon40.svg":116,"./icon41.svg":117,"./icon42.svg":118,"./icon43.svg":119,"./icon44.svg":120,"./icon45.svg":121,"./icon46.svg":122,"./icon47.svg":123,"./icon48.svg":124,"./icon49.svg":125,"./icon5.svg":126,"./icon50.svg":127,"./icon6.svg":128,"./icon7.svg":129,"./icon8.svg":130,"./icon9.svg":131};function i(e){var t=s(e);return n(t)}function s(e){if(!n.o(c,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return c[e]}i.keys=function(){return Object.keys(c)},i.resolve=s,e.exports=i,i.id=82},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon10.7b6cb582.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon11.c4e447fa.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon12.34ac38ad.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon13.b807f680.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon14.9b9fdef1.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon15.8a899c72.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon16.cfd56a7b.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon17.96da9cd4.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon18.00308d4c.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon19.e39fc14b.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon2.23fce968.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon20.5edc3050.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon21.2e62f7bd.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon22.c2953a5e.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon23.bf39ce58.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon24.47e5020a.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon25.38aeadd6.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon26.1ee31e9c.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon27.d7c6887f.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon28.b5b90c1d.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon29.f930cc1f.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon3.7dcb6761.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon30.a06620a2.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon31.1ba79db4.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon32.7d284c1b.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon33.9742d126.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon34.7d8098fb.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon35.1c8cde62.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon36.bf625fe0.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon37.d9166e4d.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon38.cd397d5e.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon39.b572e9c6.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon4.905fe3e8.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon40.d78bfd96.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon41.784bf6f8.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon42.420ccc43.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon43.87b3c1df.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon44.0efbf879.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon45.e88afedb.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon46.36b47cd7.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon47.62a72054.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon48.57a483fd.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon49.6d1bc615.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon5.2fa1db86.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon50.c017f087.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon6.86e58767.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon7.ffece1cc.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon8.840f8a8e.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/icon9.f46af93f.svg"},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),s=n(39),a=n.n(s),r=n(22),o=n.n(r),u=n(40),d=n(41),f=n(23),l=n(13),v=n(2),m=n(42),j="production",g={production:"https://tiny-conversation.herokuapp.com",development:"http://localhost:8080"},b=function(){return g[j]?g[j]:g.development},h=(n(79),n(80),n(0)),p=function(e){var t=e.children;return Object(h.jsxs)("header",{className:"header",children:[Object(h.jsxs)("div",{className:"header__left",children:[Object(h.jsx)("i",{className:"far fa-comment-dots header__icon"}),Object(h.jsx)("h1",{className:"header__title",children:"conversations"})]}),t]})},O=function(e){var t=e.userName,n=e.setUserName,i=e.children,s=Object(c.useState)(!1),a=Object(v.a)(s,2),r=a[0],o=a[1],u=Object(c.useState)(""),d=Object(v.a)(u,2),f=d[0],l=d[1];Object(c.useEffect)((function(){var e=document.querySelector(".header__username-input");e&&e.focus()}));return Object(h.jsxs)("div",{className:"header__user",children:[r?Object(h.jsx)("form",{onSubmit:function(e){e.preventDefault(),n(f),l(""),o(!1)},children:Object(h.jsx)("input",{type:"text",value:f,onChange:function(e){return l(e.target.value)},onBlur:function(){return o(!1)},className:"header__username-input",autoComplete:"off",required:!0})}):Object(h.jsx)("button",{className:"header__name-btn",onClick:function(){l(t),o(!0)},children:t}),i]})},_=n(21),x=n(82),N={};x.keys().forEach((function(e){var t;N[(t=e,t.replace("./","").replace(".svg","").replace("icon",""))]=x(e)}));n(132);var k=function(e){var t,n=e.icon,c=void 0===n?3:n,i=e.background,s=void 0===i?"#89f0a4":i,a=e.status,r=void 0!==a&&a,o=e.size,u=void 0===o?"3rem":o,d=e.margin,f=void 0===d?"0.5rem":d;return Object(h.jsxs)("div",{className:"usericon",style:{width:u,minWidth:u,height:u,minHeight:u,backgroundColor:s,margin:f},children:[Object(h.jsx)("img",{src:(t=c,N[t]?N[t].default:_.default),alt:"temp",className:"usericon__svg"}),r&&Object(h.jsx)("div",{className:"usericon__status"})]})},w=(n(133),function(e){var t=e.channelList,n=e.newMessages,c=e.emitActiveConversation,i=e.activeConversation,s=e.children,a=function(e){var t=n.find((function(t){return t.id===e}));return t&&t.new>0?t.new:""},r=function(e){return e!==i};return Object(h.jsxs)("nav",{className:"conversations",children:[t.map((function(e){return Object(h.jsxs)("button",{className:(t=e.id,"conversations__channelBtn conversations__channelBtn--".concat(t===i?"active":"inactive")),onClick:function(){return c(e.id)},children:[Object(h.jsx)("span",{children:"#"}),e.label,r(e.id)&&""!==a(e.id)&&Object(h.jsx)("span",{className:"conversations__new",children:a(e.id)})]},e.id);var t})),s]})}),y=function(e){var t=e.createChannel,n=Object(c.useState)(!1),i=Object(v.a)(n,2),s=i[0],a=i[1],r=Object(c.useState)(""),o=Object(v.a)(r,2),u=o[0],d=o[1];Object(c.useEffect)((function(){var e=document.querySelector(".conversations__add-channel-input");e&&e.focus()}));return Object(h.jsx)("div",{className:"conversations__add-channel",children:s?Object(h.jsx)("form",{onSubmit:function(e){e.preventDefault(),t(u),d(""),a(!1)},className:"conversations__add-channel-form",children:Object(h.jsx)("input",{type:"text",onBlur:function(){a(!1),d("")},className:"conversations__add-channel-input",value:u,onChange:function(e){return d(e.target.value)},required:!0})}):Object(h.jsx)("button",{className:"conversations__add-channel-btn",onClick:function(){return a(!0)},children:"+ Add Channel"})})},S=(n(134),function(e){var t=e.send,n=e.children,i=e.messages,s=e.alertTyping,a=e.usersTyping,r=e.currentChannel,o=e.spamBlock,u=e.isLoading,d=Object(c.useState)(""),f=Object(v.a)(d,2),l=f[0],m=f[1];Object(c.useEffect)((function(){var e=document.querySelector(".chat__messages");e.scrollTop=e.scrollHeight}),[i]);return Object(h.jsxs)("main",{className:"chat",children:[Object(h.jsxs)("h2",{className:"chat__channeltag",children:[Object(h.jsx)("span",{children:"#"}),r]}),Object(h.jsxs)("div",{className:"chat__messages",children:[u&&Object(h.jsxs)("div",{className:"chat__loading",children:[Object(h.jsx)("i",{className:"fas fa-sync chat__loadingicon"}),Object(h.jsx)("p",{className:"chat__loadingtext",children:"Loading..."})]}),n]}),Object(h.jsxs)("div",{className:"chat__form-container",children:[""!==a&&Object(h.jsxs)("p",{className:"chat__typingalert",children:[a,Object(h.jsx)("span",{className:"chat__dot1",children:"."}),Object(h.jsx)("span",{className:"chat__dot2",children:"."}),Object(h.jsx)("span",{className:"chat__dot3",children:"."})]}),Object(h.jsxs)("form",{className:"chat__form",onSubmit:function(e){e.preventDefault(),t(l),m("")},children:[Object(h.jsx)("input",{type:"text",className:"chat__input",value:l,onChange:function(e){s(),m(e.target.value)},required:!0,disabled:o,placeholder:o?"Please hold back a bit on your messages!":"Type here!"}),Object(h.jsx)("button",{className:"chat__button",children:"Send"})]})]})]})}),C=function(e){var t=e.user,n=e.messageObj,c=e.children;return Object(h.jsxs)("div",{className:"chat__content",children:[Object(h.jsx)("div",{className:"chat__left",children:c}),Object(h.jsxs)("div",{className:"chat__right",children:[Object(h.jsx)("div",{className:"chat__pointer"}),Object(h.jsxs)("div",{className:"chat__content-header",children:[Object(h.jsx)("p",{className:"chat__nametag",children:t}),Object(h.jsx)("p",{className:"chat__timetag",children:function(e){var t=new Date(e);return(t.getHours()<10?"0".concat(t.getHours()):t.getHours())+":"+(t.getMinutes()<10?"0".concat(t.getMinutes()):t.getMinutes())}(n.date)})]}),Object(h.jsx)("p",{className:"chat__texttag",children:n.textContent})]})]})},I=(n(135),function(e){var t=e.userlist,n=void 0===t?[]:t;return Object(h.jsx)("aside",{className:"users",children:n.map((function(e){return Object(h.jsxs)("div",{className:"users__row",children:[Object(h.jsx)(k,{icon:e.icon,background:e.color,status:!0,size:"2rem"}),Object(h.jsx)("p",{className:"users__nametag",children:e.name})]},e.id)}))})}),E=(n(136),function(){return Object(h.jsxs)("footer",{className:"footer",children:[Object(h.jsx)("p",{className:"footer__text",children:"by Oscar Lindqvist"}),Object(h.jsx)("i",{className:"fas fa-circle footer__icon"}),Object(h.jsxs)("p",{className:"footer__text",children:["Icons made by"," ",Object(h.jsx)("a",{className:"footer__link",href:"https://www.freepik.com",title:"Freepik",children:"Freepik"})," ","from"," ",Object(h.jsx)("a",{className:"footer__link",href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})]})}),F=n(16),L={},T=function(e,t){return L[e]&&L[e][t]?L[e][t]:null},q=function(e,t){L[e]?L[e][t.messageId]=t:L[e]=Object(F.a)({},t.messageId,t)},B=function(){var e=Object(c.useState)([]),t=Object(v.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)([]),a=Object(v.a)(s,2),r=a[0],j=a[1],g=Object(c.useState)(0),_=Object(v.a)(g,2),x=_[0],N=_[1],F=Object(c.useState)([]),B=Object(v.a)(F,2),M=B[0],D=B[1],H=Object(c.useState)(),A=Object(v.a)(H,2),P=A[0],U=A[1],z=Object(c.useState)([]),J=Object(v.a)(z,2),R=J[0],W=J[1],G=Object(c.useState)([]),K=Object(v.a)(G,2),Q=K[0],V=K[1],X=Object(c.useState)(!1),Y=Object(v.a)(X,2),Z=Y[0],$=Y[1],ee=Object(c.useState)(!0),te=Object(v.a)(ee,2),ne=te[0],ce=te[1],ie=Object(c.useRef)(),se=function(e){V((function(t){return t.find((function(t){return t.id===e}))?t.map((function(t){return t.id===e?Object(l.a)(Object(l.a)({},t),{},{new:t.new+1}):t})):[].concat(Object(f.a)(t),[{id:e,new:1}])}))},ae=function(e,t){return new Promise((function(n){ie.current.emit("need-message",e,t,(function(e){n(e)}))}))},re=function(){var e=Object(d.a)(o.a.mark((function e(t,n,c){var i,s,a,r,d,f,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ce(!0),i=t.split("-").filter((function(e){return""!==e})).map((function(e){return parseInt(e,10)})),s=[],a=Object(u.a)(i),e.prev=4,a.s();case 6:if((r=a.n()).done){e.next=22;break}if(d=r.value,!(f=T(n,d))){e.next=14;break}console.log("picked message from cache"),s.push(f),e.next=20;break;case 14:return console.log("asked server for message"),e.next=17,c(n,d);case 17:l=e.sent,q(n,l),s.push(l);case 20:e.next=6;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(4),a.e(e.t0);case 27:return e.prev=27,a.f(),e.finish(27);case 30:D(s),ce(!1);case 32:case"end":return e.stop()}}),e,null,[[4,24,27,30]])})));return function(t,n,c){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){ie.current=Object(m.io)(b());var e=ie.current;return e.on("clear-cache",(function(){L={}})),e.on("user-list",(function(e){return i(e)})),e.on("channel-list",(function(e){return j(e)})),e.on("user-id",(function(e){return U(e)})),e.on("users-typing",(function(e){return W(e)})),e.on("new-channel-message",se),e.on("new-sequence",(function(e,t){return re(e,t,ae)})),e.on("spam-block",(function(e){return $(e)})),function(){e.close()}}),[]);var oe=function(e){V((function(t){return t.find((function(t){return t.id===e}))?t.map((function(t){return t.id===e?Object(l.a)(Object(l.a)({},t),{},{new:0}):t})):[].concat(Object(f.a)(t),[{id:e,new:0}])}))},ue=function(e){var t=n.find((function(t){return t.id===e}));return t?t.name:"Missing"},de=function(e){var t=n.find((function(t){return t.id===e}));return t?t.color:"#89f0a4"},fe=function(e){var t=n.find((function(t){return t.id===e}));return t&&t.icon?t.icon:"0"};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"filler-div"}),Object(h.jsxs)("div",{className:"app",children:[Object(h.jsx)(p,{children:Object(h.jsx)(O,{userName:ue(P),setUserName:function(e){ie.current.emit("update-name",e)},children:Object(h.jsx)(k,{icon:fe(P),background:de(P),status:!0})})}),Object(h.jsx)(w,{channelList:r,newMessages:Q,emitActiveConversation:function(e){ce(!0),oe(x),N(e),oe(e),ie.current.emit("set-channel",e)},activeConversation:x,children:Object(h.jsx)(y,{createChannel:function(e){ie.current.emit("create-channel",e)}})}),Object(h.jsx)(S,{send:function(e){ie.current.emit("channel-message",e)},messages:M,alertTyping:function(){ie.current.emit("is-typing")},usersTyping:function(){var e=R.filter((function(e){return e!==P}));if(1===e.length)return"".concat(ue(e[0])," is typing");if(e.length<3){var t="";return e.forEach((function(n,c){c!==e.length-1?t+="".concat(ue(n),", "):t+="and ".concat(ue(n)," are typing")})),t}return"Several people are typing"}(),currentChannel:function(){var e=r.find((function(e){return e.id===x}));return e?e.label:"loading..."}(),spamBlock:Z,isLoading:ne,children:M.map((function(e){return Object(h.jsx)(C,{user:ue(e.userId),messageObj:e,children:Object(h.jsx)(k,{icon:fe(e.userId),size:"2.3rem",margin:"0",background:de(e.userId)})},e.messageId)}))}),Object(h.jsx)(I,{userlist:n.filter((function(e){return e.online}))})]}),Object(h.jsx)(E,{})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,140)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),s(e),a(e)}))};n(137),n(138);a.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(B,{})}),document.getElementById("root")),M()}]),[[139,1,2]]]);
//# sourceMappingURL=main.ae6aa1f4.chunk.js.map